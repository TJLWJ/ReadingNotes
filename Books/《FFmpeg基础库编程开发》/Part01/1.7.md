## 1.7 常用概念

### 1.7.1 硬解

视频解码分为：
- 软解
- 硬解

所谓“软解”就是通过软件让 CPU 进行视频解码处理

而“硬解”是指不依赖于 CPU，通过专用的设备(子卡) 单独完成视频解码

---

### 1.7.2 IBP帧

帧，就是影像动画中最小单位的单幅影像画面，相当于电影胶片上的每一格镜头。

---

- I frame

帧内编码帧 又称 intra picture，I 帧通常是每个 GOP(MPEG 所使用的一种视频压缩技术)的第一个帧， 经过适度地压缩，做为随机访问的参考点，可以当成图象。I 帧可以看成是一个图像经过压缩后的产物。

---

- P frame:

前向预测编码帧 又称 predictive-frame，通过充分将低于图像序列中前面已编码帧的时间冗余信息来压缩传输数据量的编码图像，也叫预测帧。

---

- B frame

双向预测内插编码帧 又称 bi-directional interpolated prediction frame，既考虑与源图像序列前面已编码帧，也顾及源图像序列后面已编码帧之间的时间冗余信息来压缩传输数据量的编码图像，也叫双向预测帧。

---

- PTS:Presentation Time Stamp

PTS 主要用于度量解码后的视频帧什么时候被显示出来。

---

- DTS:Decode Time Stamp

DTS 主要是标识读入内存中的bit流在什么时候开始送入解码器中进行解码。

在没有 B 帧存在的情况下 DTS 的顺序和 PTS 的顺序应该是一样的。

---

- I 帧特点:

1.它是一个全帧压缩编码帧。它将全帧图像信息进行 JPEG 压缩编码及传输;

2.解码时仅用 I 帧的数据就可重构完整图像;

3.I 帧描述了图像背景和运动主体的详情;

4.I 帧不需要参考其他画面而生成;

5.I 帧是 P 帧和 B 帧的参考帧(其质量直接影响到同组中以后各帧的质量);

6.I 帧是帧组 GOP 的基础帧(第一帧),在一组中只有一个 I 帧;

7.I 帧不需要考虑运动矢量;

8.I 帧所占数据的信息量比较大。

---

- P 帧:前向预测编码帧。

P 帧的预测与重构:

P 帧是以 I 帧为参考帧,在 I 帧中找出 P 帧“某点”的预测值和运动矢量,取预测差值和运动矢量一起传送。在接收端根据运动矢量从 I 帧中找出 P 帧“某点”的预测
值并与差值相加以得到 P 帧“某点”样值,从而可得到完整的 P 帧。

- P 帧特点:

1.P 帧是 I 帧后面相隔 1~2 帧的编码帧;

2.P 帧采用运动补偿的方法传送它与前面的 I 或 P 帧的差值及运动矢量(预测误差);

3.解码时必须将 I 帧中的预测值与预测误差求和后才能重构完整的 P 帧图像;

4.P 帧属于前向预测的帧间编码。它只参考前面最靠近它的 I 帧或 P 帧;

5.P 帧可以是其后面 P 帧的参考帧,也可以是其前后的 B 帧的参考帧;

6.由于 P 帧是参考帧,它可能造成解码错误的扩散;

7.由于是差值传送,P 帧的压缩比较高。

---

- B 帧:双向预测内插编码帧。

B 帧的预测与重构

B 帧以前面的 I 或 P 帧和后面的 P 帧为参考帧,“找出”B 帧“某点”的预测值和两个运动矢量,并取预测差值和运动矢量传送。接收端根据运动矢量在两个参考帧中“找出(算出)”预测值并与差值求和,得到 B 帧“某点”样值,从而可得到完整的 B 帧。

- B 帧特点

1.B 帧是由前面的 I 或 P 帧和后面的 P 帧来进行预测的;

2.B 帧传送的是它与前面的 I 或 P 帧和后面的 P 帧之间的预测误差及运动矢量;

3.B 帧是双向预测编码帧;

4.B 帧压缩比最高,因为它只反映并参考帧间运动主体的变化情况,预测比较准确;

5.B 帧不是参考帧,不会造成解码错误的扩散

---

- I:P:B -> 7:20:50
一般平均来说，I 的压缩率是 7（跟 JPG 差不多），P 是 20，B 可以达到 50，可见使用 B 帧能节省大量空间，节省出来的空间可以用来保存多一些 I 帧，这样在相同码率下，可以提供更好的画质。

---

- GOP：Group of Pictures 画面组

GOP（Group of Pictures）策略影响编码质量：所谓 GOP，意思是画面组，一个 GOP 就是一组连续的画面。

MPEG编码将画面（即帧）分为 I、P、B 三种，I 是内部编码帧，P 是前向预测帧，B 是双向内插帧。

简单地讲，I 帧是一个完整的画面，而 P 帧和 B 帧记录的是相对于 I 帧的变化。

---

- mpeg4 视频中 IBP 的判定

mpeg4 的每一帧开头是固定的：00 00 01 b6，那么我们如何判断当前帧属于什么帧呢？在接下来的 2bit，将会告诉我们答案。注意：是 2bit，不是 byte，下面是各类型帧与 2bit 的对应关系：

00: I Frame

01: P Frame

10: B Frame

---

1.7.3 DTS 和 和 PTS

---

1.7.4 分辨率

a. 物理分辨率, 即手机屏幕能显示的像素数， 用 W x H 个像素表示。

b. 视频文件的分辨率， 这个是指视频画面的实际分辨率, 如， 320x240, 480x272, 640x480 等等。

---

1.7.5 码率

一般用多少 kbps(千比特/秒)或者 mbps(兆比特/秒)来表示。 手机解码芯片所支持的码率一般都在 1Mbps 以下.

---

1.7.6 帧率

(FPS, 帧/秒), 就是视频画面刷新的速度， 作为参考, 国内电视机一般是 25FPS, 电影标准为 24FPS. 手机芯片， 最高支持 30FPS, 早期型号最大只能15fps。

---

1.7.7 RGB 和 和 YUV

RGB 指的是红绿蓝，应用还是很广泛的，比如显示器显示，bmp 文件格式中的像素值等；而 yuv 主要指亮度和两个色差信号，被称为 luminance 和 chrominance 他们的转化关系可以自己去查一下，我们视频里面基本上都是用yuv 格式。

YUV 文件格式又分很多种，如果算上存储格式，就更多了，比如 yuv444、yuv422、yuv411、yuv420 等等，视频压缩用到的是 420 格式，这是 因为人眼对亮度更敏感些，对色度相对要差些。

---

1.7.8 实时和非实时

实时与非实时 主要用来形容编码器，它含有两个意思，一个是要保证帧率，也就是每秒 25 帧，另一个是“live”的意思，意味着直播，所谓的“实况转播”的“实”。

---

1.7.9 复合视频和 s-video

ntsc 和 pal 彩色视频信号是这样构成的--首先有一个基本的黑白视频信号，然后在每个水平同步脉冲之后，加入一个颜色脉冲和一个亮度信号。

因为彩色信号是由多 种数据“叠加”起来的，故称之为“复合视频”。

s-video 则是一种信号质量更高的视频接口，它取消了信号叠加的方法，可有效避免一些无谓的质量损失。 它的功能是将rgb 三原色和亮度进行分离处理。

---

1.7.10 硬件加速

VDA/vaspi/DX 等等。

---

1.7.11 FFmpeg Device

硬件方式：CDIO / DC1394 （输入设备）

非扩展硬件：DSHOW（输入设备）、SDL（输出设备）、X11（输入）、VFWCAP（输入）、DV1394（输入）等等。

---










